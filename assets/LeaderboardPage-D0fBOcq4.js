import{d as h,u as k,n as _,b as y,r as s,x as L,j as e,T as S,y as M,F as z}from"./index-IKJjTM0H.js";import{A as R}from"./arrow-left-DM7c6I56.js";const T=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],$=h("crown",T);const A=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],x=h("medal",A);function E(){const u=k(),{user:a}=_(),{progress:g}=y(),[b,d]=s.useState([]),[p,n]=s.useState(!0),[i,f]=s.useState("all"),[m,v]=s.useState(null);s.useEffect(()=>{j()},[i]);const j=async()=>{n(!0);try{const{data:t,error:o}=await L.from("user_progress").select("user_id, total_score, words_learned, streak").order("total_score",{ascending:!1}).limit(100);if(o)throw o;const l=(t||[]).map((r,c)=>({id:r.user_id,username:`User ${r.user_id.slice(0,6)}`,total_score:r.total_score||0,words_learned:r.words_learned||0,streak:r.streak||0,rank:c+1}));if(d(l),a){const r=l.findIndex(c=>c.id===a.id)+1;v(r>0?r:null)}}catch(t){console.error("Error fetching leaderboard:",t);const o=[{id:"1",username:"WordMaster",total_score:15420,words_learned:2500,streak:45},{id:"2",username:"VocabKing",total_score:12350,words_learned:2100,streak:32},{id:"3",username:"LearnerPro",total_score:10890,words_learned:1800,streak:28},{id:"4",username:"StudyBee",total_score:9540,words_learned:1600,streak:21},{id:"5",username:"BrainBoost",total_score:8720,words_learned:1450,streak:19},{id:"6",username:"QuickMind",total_score:7650,words_learned:1280,streak:15},{id:"7",username:"SmartOwl",total_score:6890,words_learned:1150,streak:12},{id:"8",username:"WordWizard",total_score:5430,words_learned:920,streak:9},{id:"9",username:"LearnFast",total_score:4210,words_learned:710,streak:7},{id:"10",username:"VocabPro",total_score:3650,words_learned:620,streak:5}].map((l,r)=>({...l,rank:r+1}));d(o)}finally{n(!1)}},w=t=>{switch(t){case 1:return e.jsx($,{className:"w-6 h-6 text-yellow-400"});case 2:return e.jsx(x,{className:"w-6 h-6 text-gray-300"});case 3:return e.jsx(x,{className:"w-6 h-6 text-amber-600"});default:return e.jsxs("span",{className:"w-6 h-6 flex items-center justify-center text-gray-400 font-bold",children:["#",t]})}},N=t=>{switch(t){case 1:return"bg-gradient-to-r from-yellow-500/20 to-amber-500/20 border-yellow-500/30";case 2:return"bg-gradient-to-r from-gray-400/20 to-gray-300/20 border-gray-400/30";case 3:return"bg-gradient-to-r from-amber-600/20 to-orange-500/20 border-amber-600/30";default:return"bg-[var(--tg-theme-secondary-bg-color)] border-transparent"}};return e.jsxs("div",{className:"min-h-screen bg-[var(--tg-theme-bg-color)] pb-20",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[var(--tg-theme-bg-color)] border-b border-[var(--tg-theme-hint-color)]/20 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>u(-1),className:"p-2 -ml-2 rounded-full hover:bg-[var(--tg-theme-secondary-bg-color)]",children:e.jsx(R,{className:"w-5 h-5 text-[var(--tg-theme-text-color)]"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-6 h-6 text-yellow-500"}),e.jsx("h1",{className:"text-xl font-bold text-[var(--tg-theme-text-color)]",children:"Leaderboard"})]})]})}),e.jsx("div",{className:"px-4 py-3 flex gap-2",children:["all","week","today"].map(t=>e.jsx("button",{onClick:()=>f(t),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i===t?"bg-[var(--tg-theme-button-color)] text-[var(--tg-theme-button-text-color)]":"bg-[var(--tg-theme-secondary-bg-color)] text-[var(--tg-theme-hint-color)]"}`,children:t==="all"?"All Time":t==="week"?"This Week":"Today"},t))}),a&&e.jsx("div",{className:"mx-4 mb-4 p-4 rounded-xl bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--tg-theme-button-color)] flex items-center justify-center",children:e.jsx(M,{className:"w-5 h-5 text-[var(--tg-theme-button-text-color)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[var(--tg-theme-hint-color)]",children:"Your Rank"}),e.jsx("p",{className:"text-xl font-bold text-[var(--tg-theme-text-color)]",children:m?`#${m}`:"Unranked"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-[var(--tg-theme-hint-color)]",children:"Score"}),e.jsx("p",{className:"text-xl font-bold text-[var(--tg-theme-text-color)]",children:(g.wordsLearned*10).toLocaleString()})]})]})}),e.jsx("div",{className:"px-4 space-y-2",children:p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[var(--tg-theme-button-color)] border-t-transparent rounded-full animate-spin"})}):b.map(t=>e.jsx("div",{className:`p-4 rounded-xl border ${N(t.rank||0)} ${t.id===a?.id?"ring-2 ring-[var(--tg-theme-button-color)]":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[w(t.rank||0),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-semibold text-[var(--tg-theme-text-color)] truncate",children:[t.username,t.id===a?.id&&e.jsx("span",{className:"ml-2 text-xs bg-[var(--tg-theme-button-color)] text-[var(--tg-theme-button-text-color)] px-2 py-0.5 rounded-full",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--tg-theme-hint-color)]",children:[e.jsxs("span",{children:["ðŸ“š ",t.words_learned," words"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3 text-orange-500"}),t.streak," days"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-[var(--tg-theme-text-color)]",children:t.total_score.toLocaleString()}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"points"})]})]})},t.id))})]})}export{E as default};
