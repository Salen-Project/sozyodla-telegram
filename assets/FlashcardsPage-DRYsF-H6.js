import{r as o,j as e,m as p,V as P,c as h,u as Y,a as G,b as Q,e as H,s as X,h as Z,T as J,R as ee}from"./index-CAlHdi32.js";import{A as U}from"./index-CuWBKL8L.js";import{H as te}from"./heart-Bf7dpuU8.js";import{R as L}from"./rotate-ccw-605wCTw7.js";import{C as B}from"./circle-check-big-BNjX8yxE.js";import{C as se}from"./circle-x-DQxVUxUc.js";const W=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)","linear-gradient(135deg, #fccb90 0%, #d57eeb 100%)","linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)"],ae=r=>{let l=0;for(let s=0;s<r.length;s++)l=(l<<5)-l+r.charCodeAt(s),l|=0;return Math.abs(l)},re=(r,l)=>{const s=r.toLowerCase();return["afraid","fear","scared","nervous","worry"].some(t=>s.includes(t))?"ðŸ˜¨":["angry","mad","fury","rage"].some(t=>s.includes(t))?"ðŸ˜ ":["happy","joy","glad","pleased","cheerful","excited"].some(t=>s.includes(t))?"ðŸ˜Š":["sad","sorrow","grief","unhappy"].some(t=>s.includes(t))?"ðŸ˜¢":["run","walk","jump","move","fly","swim"].some(t=>s.includes(t))?"ðŸƒ":["eat","food","cook","meal","drink"].some(t=>s.includes(t))?"ðŸ½ï¸":["book","read","write","study","learn"].some(t=>s.includes(t))?"ðŸ“š":["work","job","office","business"].some(t=>s.includes(t))?"ðŸ’¼":["home","house","room","door","wall"].some(t=>s.includes(t))?"ðŸ ":["tree","flower","plant","garden"].some(t=>s.includes(t))?"ðŸŒ³":["water","river","ocean","rain","sea"].some(t=>s.includes(t))?"ðŸŒŠ":["fire","hot","burn","heat"].some(t=>s.includes(t))?"ðŸ”¥":["light","sun","bright","shine"].some(t=>s.includes(t))?"â˜€ï¸":["dark","night","shadow","black"].some(t=>s.includes(t))?"ðŸŒ™":["love","heart","kind","care"].some(t=>s.includes(t))?"â¤ï¸":["money","pay","cost","price","rich"].some(t=>s.includes(t))?"ðŸ’°":["time","clock","hour","wait"].some(t=>s.includes(t))?"â°":l==="v"?"âš¡":l==="adj"?"âœ¨":l==="n"?"ðŸ“¦":"ðŸ’¡"},ne=({word:r,pos:l})=>{const t=ae(r)%W.length,b=re(r,l);return e.jsx("div",{className:"w-20 h-20 rounded-2xl mb-3 flex items-center justify-center shadow-sm",style:{background:W[t]},children:e.jsx("span",{className:"text-3xl",children:b})})},le=({word:r,index:l,total:s,isFavorite:t,onToggleFavorite:b,onSwipeLeft:z,onSwipeRight:R})=>{const[v,y]=o.useState(!1),[d,i]=o.useState(null),u=()=>{h.impact("light"),y(!v)},c=(m,n)=>{n.offset.x>100?(h.notification("success"),R(),y(!1)):n.offset.x<-100&&(h.impact("medium"),z(),y(!1)),i(null)},j=(m,n)=>{n.offset.x>30?i("right"):n.offset.x<-30?i("left"):i(null)},x=m=>{const n=new SpeechSynthesisUtterance(m);n.lang="en-US",n.rate=.85,speechSynthesis.speak(n),h.selection()};return e.jsxs("div",{className:"relative w-full max-w-sm mx-auto",style:{perspective:"1000px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("span",{className:"text-xs font-medium",style:{color:"var(--tg-hint)"},children:[l+1," / ",s]}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:s},(m,n)=>e.jsx("div",{className:"h-1 rounded-full transition-all duration-300",style:{width:n===l?"20px":"6px",backgroundColor:n<=l?"var(--tg-button)":"var(--tg-secondary-bg)"}},n))})]}),e.jsx(U,{children:d&&e.jsx(p.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute top-1/2 z-10 -translate-y-1/2 text-2xl font-bold rounded-xl px-4 py-2",style:{...d==="right"?{left:"8px",backgroundColor:"#22c55e20",color:"#22c55e"}:{right:"8px",backgroundColor:"#ef444420",color:"#ef4444"}},children:d==="right"?"âœ“ Know":"âœ— Review"})}),e.jsx(p.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.7,onDrag:j,onDragEnd:c,whileDrag:{scale:.97},onClick:u,className:"cursor-pointer touch-pan-y",children:e.jsxs(p.div,{animate:{rotateY:v?180:0},transition:{duration:.4,type:"spring",stiffness:300,damping:30},style:{transformStyle:"preserve-3d"},className:"relative w-full aspect-[3/4] rounded-2xl",children:[e.jsxs("div",{className:"absolute inset-0 rounded-2xl p-6 flex flex-col items-center justify-center shadow-lg",style:{backfaceVisibility:"hidden",backgroundColor:"var(--tg-section-bg)",border:"1px solid var(--tg-secondary-bg)"},children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full",children:[e.jsx(ne,{word:r.word,pos:r.partOfSpeech}),e.jsx("span",{className:"text-xs uppercase tracking-wider mb-2 font-medium",style:{color:"var(--tg-hint)"},children:r.partOfSpeech||"word"}),e.jsx("h2",{className:"text-3xl font-bold mb-4",style:{color:"var(--tg-text)"},children:r.word}),e.jsx("button",{onClick:m=>{m.stopPropagation(),x(r.word)},className:"p-3 rounded-full mb-4 active:scale-90 transition-transform",style:{backgroundColor:"var(--tg-secondary-bg)"},children:e.jsx(P,{size:20,style:{color:"var(--tg-button)"}})}),e.jsx("p",{className:"text-sm text-center opacity-60 mt-2",style:{color:"var(--tg-hint)"},children:"Tap to flip â€¢ Swipe to navigate"})]}),e.jsx("div",{className:"flex gap-3 w-full",children:e.jsx("button",{onClick:m=>{m.stopPropagation(),b(),h.impact("light")},className:"p-2 rounded-full active:scale-90 transition-transform",style:{backgroundColor:"var(--tg-secondary-bg)"},children:e.jsx(te,{size:18,fill:t?"#ef4444":"none",color:t?"#ef4444":"var(--tg-hint)"})})})]}),e.jsxs("div",{className:"absolute inset-0 rounded-2xl p-6 flex flex-col shadow-lg overflow-y-auto",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)",backgroundColor:"var(--tg-section-bg)",border:"1px solid var(--tg-secondary-bg)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:"var(--tg-text)"},children:r.word}),e.jsx(L,{size:16,style:{color:"var(--tg-hint)"}})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs uppercase tracking-wider font-medium block mb-1",style:{color:"var(--tg-section-header)"},children:"Translation (UZ)"}),e.jsx("p",{className:"text-lg font-semibold",style:{color:"var(--tg-text)"},children:r.meaning})]}),r.meaningRu&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs uppercase tracking-wider font-medium block mb-1",style:{color:"var(--tg-section-header)"},children:"Translation (RU)"}),e.jsx("p",{className:"text-base",style:{color:"var(--tg-text)"},children:r.meaningRu})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs uppercase tracking-wider font-medium block mb-1",style:{color:"var(--tg-section-header)"},children:"Definition"}),e.jsx("p",{className:"text-sm leading-relaxed",style:{color:"var(--tg-text)"},children:r.definition})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs uppercase tracking-wider font-medium block mb-1",style:{color:"var(--tg-section-header)"},children:"Example"}),e.jsxs("p",{className:"text-sm italic leading-relaxed",style:{color:"var(--tg-subtitle)"},children:['"',r.example,'"']})]})]})]})]})})]})},ie="sozyola_tg_lang",fe=()=>{const r=Y(),{bookId:l,unitId:s}=G(),{saveResult:t,addWordsLearned:b,toggleFavorite:z,isFavorite:R,setLastStudied:v,updateStreak:y}=Q(),d=H.find(a=>a.id===Number(l)),i=d?.units.find(a=>a.id===Number(s)),[u]=o.useState(()=>localStorage.getItem(ie)||"uz"),[c,j]=o.useState([]),[x,m]=o.useState(0),[n,k]=o.useState(0),[M,I]=o.useState(0),[N,D]=o.useState([]),[_,E]=o.useState(!1),[w,F]=o.useState(!1);o.useEffect(()=>{if(i){const a=[...i.words].sort(()=>Math.random()-.5);j(a)}},[i]),o.useEffect(()=>{X(()=>r(`/unit/${l}/${s}`)),Z(),d&&i&&(v(d.id,i.id),y())},[r,l,s,d,i,v,y]);const q=o.useCallback(a=>{if("speechSynthesis"in window){speechSynthesis.cancel();const f=new SpeechSynthesisUtterance(a);f.lang="en-US",f.rate=.85,speechSynthesis.speak(f)}},[]),T=o.useCallback(a=>{if(E(!0),!w&&d&&i){const f=c.length,g=Math.round(a/f*100);t(d.id,i.id,{score:a,total:f,percentage:g,date:new Date().toISOString()}),b(a)}h.notification(a>=c.length*.8?"success":"warning")},[w,d,i,c.length,t,b]),C=o.useCallback(a=>{x<c.length-1?setTimeout(()=>m(f=>f+1),150):T(a)},[x,c.length,T]),$=o.useCallback(()=>{h.impact("light");const a=n+1;k(a),C(a)},[n,C]),A=o.useCallback(()=>{h.impact("medium"),I(a=>a+1),D(a=>[...a,c[x]]),C(n)},[c,x,n,C]),K=o.useCallback(()=>{const a=[...N].sort(()=>Math.random()-.5);j(a),m(0),k(0),I(0),D([]),E(!1),F(!0),h.impact("medium")},[N]),O=o.useCallback(()=>{if(i){const a=[...i.words].sort(()=>Math.random()-.5);j(a)}m(0),k(0),I(0),D([]),E(!1),F(!1),h.impact("medium")},[i]);if(!d||!i||c.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{style:{color:"var(--tg-hint)"},children:"Loading..."})});if(_){const a=c.length,f=a>0?Math.round(n/a*100):0,g=f>=80;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center px-6 pb-6 safe-area-bottom",children:[e.jsx(p.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},className:"mb-4",children:g?e.jsx(J,{size:72,style:{color:"#22c55e"}}):e.jsx(B,{size:72,style:{color:"#f59e0b"}})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--tg-text)"},children:w?u==="uz"?"Qayta urinish tugadi!":"Retry Complete!":u==="uz"?"Kartochkalar tugadi!":"Flashcards Complete!"}),e.jsxs(p.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"text-5xl font-extrabold mb-4",style:{color:g?"#22c55e":"#f59e0b"},children:[f,"%"]}),e.jsxs("div",{className:"flex gap-8 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"#22c55e"},children:n}),e.jsx("div",{className:"text-xs",style:{color:"var(--tg-hint)"},children:u==="uz"?"To'g'ri":"Correct"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"#ef4444"},children:M}),e.jsx("div",{className:"text-xs",style:{color:"var(--tg-hint)"},children:u==="uz"?"Noto'g'ri":"Incorrect"})]})]}),e.jsx("div",{className:"px-4 py-3 rounded-xl mb-6 text-center",style:{backgroundColor:g?"#22c55e20":"#f59e0b20",maxWidth:"280px"},children:e.jsx("p",{className:"text-sm font-medium",style:{color:g?"#22c55e":"#f59e0b"},children:g?u==="uz"?"Ajoyib! Siz bu so'zlarni o'zlashtirdingiz.":"Great job! You've mastered these words.":u==="uz"?"Mashq qilishda davom eting!":"Keep practicing!"})}),e.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-[280px]",children:[N.length>0&&e.jsxs("button",{onClick:K,className:"w-full py-3 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 active:scale-95 transition-transform",style:{backgroundColor:"var(--tg-button)",color:"var(--tg-button-text)"},children:[e.jsx(L,{size:18}),u==="uz"?`Xatolarni mashq qilish (${N.length})`:`Practice Incorrect (${N.length})`]}),e.jsxs("button",{onClick:O,className:"w-full py-3 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 active:scale-95 transition-transform",style:{backgroundColor:"var(--tg-secondary-bg)",color:"var(--tg-text)"},children:[e.jsx(ee,{size:18}),u==="uz"?"Qaytadan boshlash":"Start Over"]}),e.jsx("button",{onClick:()=>r(`/unit/${l}/${s}`),className:"w-full py-3 rounded-xl text-sm font-semibold active:scale-95 transition-transform",style:{backgroundColor:"var(--tg-secondary-bg)",color:"var(--tg-hint)"},children:u==="uz"?"Bo'limga qaytish":"Back to Unit"})]})]})}const S=c[x],V=(x+1)/c.length*100;return e.jsxs("div",{className:"h-full flex flex-col px-4 pt-2 pb-6 safe-area-bottom",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-medium",style:{color:"var(--tg-hint)"},children:w?u==="uz"?"Qayta urinish":"Retry Mode":`${x+1} / ${c.length}`}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{style:{color:"#22c55e"},children:["âœ“ ",n]}),e.jsxs("span",{style:{color:"#ef4444"},children:["âœ— ",M]})]})]}),e.jsx("div",{className:"h-1.5 rounded-full overflow-hidden",style:{backgroundColor:"var(--tg-secondary-bg)"},children:e.jsx(p.div,{className:"h-full rounded-full",style:{backgroundColor:"var(--tg-button)"},initial:{width:0},animate:{width:`${V}%`},transition:{duration:.3}})})]}),e.jsx(U,{mode:"wait",children:e.jsx(p.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.2},className:"flex-1 flex items-center",children:e.jsx(le,{word:S,index:x,total:c.length,isFavorite:R(d.id,i.id,S.word),onToggleFavorite:()=>z(d.id,i.id,S.word),onSwipeLeft:A,onSwipeRight:$})},x)}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[e.jsxs("button",{onClick:A,className:"flex-1 py-3 rounded-xl text-sm font-semibold max-w-[140px] active:scale-95 transition-transform flex items-center justify-center gap-2",style:{backgroundColor:"#ef444420",color:"#ef4444"},children:[e.jsx(se,{size:18}),u==="uz"?"Bilmayman":"Review"]}),e.jsx("button",{onClick:()=>q(S.word),className:"w-12 h-12 rounded-xl flex items-center justify-center active:scale-95 transition-transform",style:{backgroundColor:"var(--tg-secondary-bg)"},children:e.jsx(P,{size:20,style:{color:"var(--tg-button)"}})}),e.jsxs("button",{onClick:$,className:"flex-1 py-3 rounded-xl text-sm font-semibold max-w-[140px] active:scale-95 transition-transform flex items-center justify-center gap-2",style:{backgroundColor:"#22c55e20",color:"#22c55e"},children:[e.jsx(B,{size:18}),u==="uz"?"Bilaman":"Know it"]})]})]})};export{fe as FlashcardsPage};
