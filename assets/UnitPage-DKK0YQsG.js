import{d as b,u as f,a as y,b as v,r as n,e as j,s as N,h as k,f as w,j as e,B as C,g as S,S as $,m as g,c as p,V as z}from"./index-DtPDoSvR.js";import{g as E}from"./images-Cz2n-uX2.js";import{S as B}from"./shuffle-BnICQ_Rt.js";import{L as I}from"./list-checks-B_G-L5DF.js";import{F as W}from"./file-text-CHtP-5lX.js";import{A}from"./arrow-right-CImKPWIz.js";const M=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],U=b("pen",M),L="sozyola_tg_lang",P=({word:l,lang:a})=>{const[o,m]=n.useState(!1),c=E(l.image),d=a==="ru"&&l.meaningRu?l.meaningRu:l.meaning,h=r=>{const s=new SpeechSynthesisUtterance(r);s.lang="en-US",s.rate=.85,speechSynthesis.speak(s),p.selection()};return e.jsxs("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:"var(--tg-section-bg)",border:"1px solid var(--tg-secondary-bg)"},children:[c&&!o?e.jsx("div",{className:"w-full h-32 overflow-hidden",style:{backgroundColor:"var(--tg-secondary-bg)"},children:e.jsx("img",{src:c,alt:l.word,loading:"lazy",className:"w-full h-full object-cover",onError:()=>m(!0)})}):e.jsx("div",{className:"w-full h-20 flex items-center justify-center",style:{backgroundColor:"var(--tg-secondary-bg)"},children:e.jsx("span",{className:"text-3xl opacity-50",children:"ðŸ“–"})}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("span",{className:"text-base font-bold",style:{color:"var(--tg-link)"},children:l.word}),e.jsx("button",{onClick:()=>h(l.word),className:"active:opacity-60 p-0.5",children:e.jsx(z,{size:14,style:{color:"var(--tg-hint)"}})}),l.partOfSpeech&&e.jsx("span",{className:"ml-auto text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:"var(--tg-secondary-bg)",color:"var(--tg-hint)"},children:l.partOfSpeech})]}),e.jsx("p",{className:"text-sm font-medium mb-1.5",style:{color:"var(--tg-text)"},children:d}),e.jsxs("p",{className:"text-xs mb-1",style:{color:"var(--tg-subtitle)"},children:[e.jsx("span",{style:{color:"var(--tg-hint)"},children:"Def: "}),l.definition]}),e.jsxs("p",{className:"text-xs italic",style:{color:"var(--tg-hint)"},children:['"',l.example,'"']})]})]})},V=()=>{const l=f(),{bookId:a,unitId:o}=y(),{progress:m}=v(),[c,d]=n.useState(!1),[h]=n.useState(()=>localStorage.getItem(L)||"uz"),r=j.find(t=>t.id===Number(a)),s=r?.units.find(t=>t.id===Number(o));if(n.useEffect(()=>{N(()=>l(`/book/${a}`)),k()},[l,a]),n.useEffect(()=>{r&&s&&w({bookId:r.id,unitId:s.id,bookTitle:r.title,unitTitle:s.title})},[r,s]),!r||!s)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{style:{color:"var(--tg-hint)"},children:"Unit not found"})});const i=m.results[`${r.id}-${s.id}`],u=[{id:"flashcards",label:"Flashcards",desc:"Swipe through word cards",icon:C,color:"#3b82f6",path:`/flashcards/${a}/${o}`},{id:"quiz",label:"Quiz",desc:"Multiple choice questions",icon:S,color:"#8b5cf6",path:`/quiz/${a}/${o}`},{id:"recall",label:"Word Recall",desc:"Type the correct word",icon:U,color:"#f59e0b",path:`/recall/${a}/${o}`},{id:"matching",label:"Matching",desc:"Match words with meanings",icon:B,color:"#22c55e",path:`/matching/${a}/${o}`},{id:"multiple-choice",label:"Multiple Choice",desc:"Choose the right meaning",icon:I,color:"#ec4899",path:`/multiple-choice/${a}/${o}`},{id:"scramble",label:"Word Scramble",desc:"Unscramble the letters",icon:$,color:"#06b6d4",path:`/scramble/${a}/${o}`,isNew:!0},{id:"fill-blank",label:"Fill in Blank",desc:"Complete the sentence",icon:W,color:"#8b5cf6",path:`/fill-blank/${a}/${o}`,isNew:!0}];return e.jsx("div",{className:"h-full overflow-y-auto pb-6 safe-area-bottom",children:e.jsxs("div",{className:"px-4 pt-4",children:[e.jsxs("div",{className:"rounded-2xl p-5 mb-4",style:{backgroundColor:"var(--tg-section-bg)",border:"1px solid var(--tg-secondary-bg)"},children:[e.jsx("h1",{className:"text-xl font-bold mb-1",style:{color:"var(--tg-text)"},children:s.title}),e.jsxs("p",{className:"text-sm mb-3",style:{color:"var(--tg-subtitle)"},children:[r.title," â€¢ ",s.words.length," words"]}),i&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold",style:{backgroundColor:i.percentage>=80?"#22c55e20":"#f59e0b20",color:i.percentage>=80?"#22c55e":"#f59e0b"},children:["Best: ",i.percentage,"% (",i.score,"/",i.total,")"]})]}),e.jsx("h2",{className:"text-sm font-semibold mb-3 uppercase tracking-wider",style:{color:"var(--tg-section-header)"},children:"Start Practicing"}),e.jsx("div",{className:"space-y-2 mb-5",children:u.map((t,x)=>e.jsxs(g.button,{initial:{opacity:0,x:-15},animate:{opacity:1,x:0},transition:{delay:x*.06},whileTap:{scale:.98},onClick:()=>{p.impact("light"),l(t.path)},className:"w-full flex items-center gap-3 p-4 rounded-xl",style:{backgroundColor:"var(--tg-section-bg)",border:"1px solid var(--tg-secondary-bg)"},children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:`${t.color}20`},children:e.jsx(t.icon,{size:20,style:{color:t.color}})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--tg-text)"},children:t.label}),t.isNew&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-gradient-to-r from-cyan-500 to-purple-500 text-white",children:"NEW"})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--tg-hint)"},children:t.desc})]}),e.jsx(A,{size:18,style:{color:t.color}})]},t.id))}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider",style:{color:"var(--tg-section-header)"},children:"All Words"}),e.jsx("button",{onClick:()=>d(!c),className:"text-xs font-medium px-3 py-1 rounded-full active:opacity-70",style:{backgroundColor:"var(--tg-secondary-bg)",color:"var(--tg-button)"},children:c?"Collapse":"Show All"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(c?s.words:s.words.slice(0,4)).map((t,x)=>e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:Math.min(x*.03,.3)},children:e.jsx(P,{word:t,lang:h})},t.word))}),!c&&s.words.length>4&&e.jsxs("button",{onClick:()=>d(!0),className:"w-full mt-3 py-2.5 rounded-xl text-sm font-medium active:opacity-70",style:{backgroundColor:"var(--tg-secondary-bg)",color:"var(--tg-button)"},children:["Show all ",s.words.length," words"]})]})]})})};export{V as UnitPage};
