import{d as j,u as N,b as C,r as n,j as e,y as k,c as D}from"./index-Dbv-jb_x.js";import{A as S}from"./arrow-left-CYILr4WH.js";import{C as M}from"./calendar-CGbnU3M7.js";import{C as T}from"./circle-check-big-CEvOBzdg.js";const z=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],A=j("gift",z),R=[{id:"learn-10",title:"Word Explorer",description:"Learn 10 new words",icon:"ðŸ“š",target:10,reward:50,type:"words"},{id:"learn-20",title:"Vocabulary Builder",description:"Learn 20 new words",icon:"ðŸ“–",target:20,reward:100,type:"words"},{id:"quiz-3",title:"Quiz Master",description:"Complete 3 quizzes",icon:"ðŸ§ ",target:3,reward:75,type:"quiz"},{id:"review-15",title:"Memory Keeper",description:"Review 15 words",icon:"ðŸ”„",target:15,reward:60,type:"review"},{id:"challenge-100",title:"Speed Demon",description:"Score 100+ in Challenge",icon:"âš¡",target:100,reward:80,type:"challenge"},{id:"streak-maintain",title:"Consistency King",description:"Maintain your streak",icon:"ðŸ”¥",target:1,reward:40,type:"streak"}],g="sozyola_daily_challenges";function _(){const p=N(),{progress:d}=C(),[o,u]=n.useState(()=>{const t=localStorage.getItem(g),r=new Date().toISOString().split("T")[0];if(t){const s=JSON.parse(t);if(s.date===r)return s}return{date:r,completed:[],progress:{},claimed:[]}}),m=n.useMemo(()=>{const t=Math.floor((Date.now()-new Date(new Date().getFullYear(),0,0).getTime())/864e5);return[...R].sort((s,a)=>{const i=(t*17+s.id.charCodeAt(0))%100,c=(t*17+a.id.charCodeAt(0))%100;return i-c}).slice(0,4)},[]),x=t=>{switch(t.type){case"words":return d.dailyGoal.wordsToday||0;case"quiz":return o.progress.quiz||0;case"review":return o.progress.review||0;case"challenge":return o.progress.challenge||0;case"streak":return d.streak.count>0?1:0;default:return 0}},h=t=>x(t)>=t.target,l=t=>o.claimed.includes(t.id),v=t=>{if(!h(t)||l(t))return;D.notification("success"),u(s=>({...s,claimed:[...s.claimed,t.id]}));const r={...o,claimed:[...o.claimed,t.id]};localStorage.setItem(g,JSON.stringify(r))},[f,w]=n.useState("");n.useEffect(()=>{const t=()=>{const s=new Date,a=new Date(s);a.setDate(a.getDate()+1),a.setHours(0,0,0,0);const i=a.getTime()-s.getTime(),c=Math.floor(i/(1e3*60*60)),y=Math.floor(i%(1e3*60*60)/(1e3*60));w(`${c}h ${y}m`)};t();const r=setInterval(t,6e4);return()=>clearInterval(r)},[]);const b=m.filter(t=>l(t)).reduce((t,r)=>t+r.reward,0);return e.jsxs("div",{className:"min-h-screen bg-[var(--tg-theme-bg-color)] pb-20",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[var(--tg-theme-bg-color)] border-b border-[var(--tg-theme-hint-color)]/20 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>p(-1),className:"p-2 -ml-2 rounded-full hover:bg-[var(--tg-theme-secondary-bg-color)]",children:e.jsx(S,{className:"w-5 h-5 text-[var(--tg-theme-text-color)]"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6 text-blue-500"}),e.jsx("h1",{className:"text-xl font-bold text-[var(--tg-theme-text-color)]",children:"Daily Challenges"})]})]})}),e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-[var(--tg-theme-secondary-bg-color)]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"text-sm text-[var(--tg-theme-text-color)]",children:"Resets in"})]}),e.jsx("span",{className:"font-bold text-[var(--tg-theme-button-color)]",children:f})]})}),e.jsx("div",{className:"px-4 mb-4",children:e.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-medium text-[var(--tg-theme-text-color)]",children:"Today's Rewards"})]}),e.jsxs("span",{className:"text-xl font-bold text-yellow-500",children:["+",b," pts"]})]})})}),e.jsx("div",{className:"px-4 space-y-3",children:m.map(t=>{const r=x(t),s=h(t),a=l(t),i=Math.min(100,r/t.target*100);return e.jsx("div",{className:`p-4 rounded-xl border ${a?"bg-green-500/10 border-green-500/30":s?"bg-[var(--tg-theme-secondary-bg-color)] border-[var(--tg-theme-button-color)]":"bg-[var(--tg-theme-secondary-bg-color)] border-transparent"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-[var(--tg-theme-text-color)]",children:t.title}),a&&e.jsx(T,{className:"w-4 h-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-[var(--tg-theme-hint-color)]",children:t.description}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-[var(--tg-theme-hint-color)]",children:[r,"/",t.target]}),e.jsxs("span",{className:"text-yellow-500 font-medium",children:["+",t.reward," pts"]})]}),e.jsx("div",{className:"h-2 bg-[var(--tg-theme-bg-color)] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${a?"bg-green-500":s?"bg-[var(--tg-theme-button-color)]":"bg-blue-500"}`,style:{width:`${i}%`}})})]})]}),s&&!a&&e.jsx("button",{onClick:()=>v(t),className:"px-3 py-1.5 rounded-lg bg-[var(--tg-theme-button-color)] text-[var(--tg-theme-button-text-color)] text-sm font-medium",children:"Claim"})]})},t.id)})}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("h2",{className:"text-sm font-semibold text-[var(--tg-theme-hint-color)] uppercase tracking-wider mb-3",children:"Tips"}),e.jsxs("div",{className:"space-y-2 text-sm text-[var(--tg-theme-hint-color)]",children:[e.jsx("p",{children:"â€¢ Complete challenges before reset to earn bonus points"}),e.jsx("p",{children:"â€¢ Challenges refresh daily with new goals"}),e.jsx("p",{children:"â€¢ Build streaks for extra rewards"})]})]})]})}export{_ as default};
