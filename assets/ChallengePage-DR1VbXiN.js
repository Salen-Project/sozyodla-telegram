import{d as q,u as F,b as G,r as s,e as H,c as f,j as e,Z as x,y as Z,T as P}from"./index-C8yg4PaE.js";import{A as K}from"./arrow-left-UJkIfiE2.js";import{C as U}from"./circle-check-big-CfaS7UR6.js";const z=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],y=q("timer",z),p=60,_=10,B=5;function Y(){const S=F(),{progress:D,addWordsLearned:Q}=G(),[n,C]=s.useState("ready"),[k,A]=s.useState(p),[d,I]=s.useState(0),[j,v]=s.useState(0),[R,E]=s.useState(0),[h,T]=s.useState(0),[M,L]=s.useState(0),[o,N]=s.useState(null),[g,u]=s.useState(null),[W,w]=s.useState(null),i=s.useMemo(()=>{const r=[];return H.forEach(t=>t.units.forEach(l=>r.push(...l.words))),r},[]),b=s.useCallback(()=>{const r=Math.floor(Math.random()*i.length),t=i[r],l=[];for(;l.length<3;){const c=i[Math.floor(Math.random()*i.length)];c.meaning!==t.meaning&&!l.includes(c.meaning)&&l.push(c.meaning)}const a=[...l,t.meaning].sort(()=>Math.random()-.5),m=a.indexOf(t.meaning);return{word:t,options:a,correctIndex:m}},[i]);s.useEffect(()=>{if(n!=="playing")return;const r=setInterval(()=>{A(t=>t<=1?(C("finished"),f.notification("warning"),0):t-1)},1e3);return()=>clearInterval(r)},[n]),s.useEffect(()=>{n==="playing"&&!o&&N(b())},[n,o,b]);const O=()=>{f.impact("medium"),C("playing"),A(p),I(0),v(0),E(0),T(0),L(0),N(b()),u(null),w(null)},$=r=>{if(g)return;if(w(r),r===o?.correctIndex){f.notification("success");const l=j>=3?B:0;I(a=>a+_+l),v(a=>a+1),E(a=>Math.max(a,j+1)),L(a=>a+1),Q(1),u("correct")}else f.notification("error"),v(0),u("wrong");T(l=>l+1),setTimeout(()=>{u(null),w(null),N(b())},500)};if(n==="ready")return e.jsxs("div",{className:"min-h-screen bg-[var(--tg-theme-bg-color)] flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 flex items-center border-b border-[var(--tg-theme-hint-color)]/20",children:[e.jsx("button",{onClick:()=>S(-1),className:"p-2 -ml-2 rounded-full hover:bg-[var(--tg-theme-secondary-bg-color)]",children:e.jsx(K,{className:"w-5 h-5 text-[var(--tg-theme-text-color)]"})}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-semibold text-[var(--tg-theme-text-color)]",children:"Speed Challenge"})]}),e.jsx("div",{className:"w-9"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš¡"}),e.jsx("h1",{className:"text-2xl font-bold text-[var(--tg-theme-text-color)] mb-2",children:"Speed Challenge"}),e.jsxs("p",{className:"text-[var(--tg-theme-hint-color)] mb-6 max-w-xs",children:["Answer as many questions as you can in ",p," seconds!"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 w-full max-w-sm",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--tg-theme-secondary-bg-color)]",children:[e.jsx(y,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),e.jsxs("p",{className:"text-lg font-bold text-[var(--tg-theme-text-color)]",children:[p,"s"]}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"Time Limit"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--tg-theme-secondary-bg-color)]",children:[e.jsx(Z,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),e.jsxs("p",{className:"text-lg font-bold text-[var(--tg-theme-text-color)]",children:["+",_]}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"Per Answer"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--tg-theme-secondary-bg-color)]",children:[e.jsx(x,{className:"w-6 h-6 text-orange-500 mx-auto mb-2"}),e.jsxs("p",{className:"text-lg font-bold text-[var(--tg-theme-text-color)]",children:["+",B]}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"Streak Bonus"})]})]}),e.jsxs("button",{onClick:O,className:"px-8 py-4 rounded-xl bg-[var(--tg-theme-button-color)] text-[var(--tg-theme-button-text-color)] font-bold text-lg flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Start Challenge"]})]})]});if(n==="finished"){const r=h>0?Math.round(M/h*100):0;return e.jsxs("div",{className:"min-h-screen bg-[var(--tg-theme-bg-color)] flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:d>=200?"ðŸ†":d>=100?"â­":"ðŸ’ª"}),e.jsx("h1",{className:"text-2xl font-bold text-[var(--tg-theme-text-color)] mb-2",children:"Challenge Complete!"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-sm mb-6",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border border-yellow-500/30",children:[e.jsx(P,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--tg-theme-text-color)]",children:d}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"Score"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-500/30",children:[e.jsx(U,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold text-[var(--tg-theme-text-color)]",children:[M,"/",h]}),e.jsxs("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:["Correct (",r,"%)"]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--tg-theme-secondary-bg-color)]",children:[e.jsx(x,{className:"w-6 h-6 text-orange-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--tg-theme-text-color)]",children:R}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"Best Streak"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--tg-theme-secondary-bg-color)]",children:[e.jsx(y,{className:"w-6 h-6 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--tg-theme-text-color)]",children:h}),e.jsx("p",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:"Questions"})]})]}),e.jsxs("div",{className:"flex gap-3 w-full max-w-sm",children:[e.jsx("button",{onClick:()=>S("/"),className:"flex-1 px-4 py-3 rounded-xl bg-[var(--tg-theme-secondary-bg-color)] text-[var(--tg-theme-text-color)] font-medium",children:"Home"}),e.jsxs("button",{onClick:O,className:"flex-1 px-4 py-3 rounded-xl bg-[var(--tg-theme-button-color)] text-[var(--tg-theme-button-text-color)] font-medium flex items-center justify-center gap-2",children:[e.jsx(x,{className:"w-4 h-4"}),"Play Again"]})]})]})}return e.jsxs("div",{className:"min-h-screen bg-[var(--tg-theme-bg-color)] flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-b border-[var(--tg-theme-hint-color)]/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-orange-500"}),e.jsxs("span",{className:"font-bold text-[var(--tg-theme-text-color)]",children:[j,"x"]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full ${k<=10?"bg-red-500/20 text-red-500":"bg-[var(--tg-theme-secondary-bg-color)] text-[var(--tg-theme-text-color)]"}`,children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-bold tabular-nums",children:[k,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"font-bold text-[var(--tg-theme-text-color)]",children:d})]})]}),e.jsx("div",{className:"flex-1 p-4 flex flex-col",children:o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-sm text-[var(--tg-theme-hint-color)] mb-2",children:"What does this word mean?"}),e.jsx("h2",{className:"text-3xl font-bold text-[var(--tg-theme-text-color)] mb-8",children:o.word.word})]}),e.jsx("div",{className:"space-y-3",children:o.options.map((r,t)=>{const l=W===t,a=t===o.correctIndex;let m="bg-[var(--tg-theme-secondary-bg-color)]",c="border-transparent";return g&&(a?(m="bg-green-500/20",c="border-green-500"):l&&!a&&(m="bg-red-500/20",c="border-red-500")),e.jsx("button",{onClick:()=>$(t),disabled:!!g,className:`w-full p-4 rounded-xl border-2 ${m} ${c} text-left transition-all ${g?"":"active:scale-98"}`,children:e.jsx("p",{className:"font-medium text-[var(--tg-theme-text-color)]",children:r})},t)})})]})})]})}export{Y as default};
